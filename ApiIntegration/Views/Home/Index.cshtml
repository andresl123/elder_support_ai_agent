@model List<string>
@{
    ViewData["Title"] = "FastAPI Response";
    var sessionId = ViewBag.SessionId as string;
}

<h1>FastAPI Integration</h1>

<!-- Session Creation Form -->
<form asp-action="CreateSessionFromIndex" method="post" style="margin-bottom: 20px;">
    <button type="submit" class="btn btn-primary">Create New Session</button>
</form>

@if (!string.IsNullOrEmpty(sessionId))
{
    <div class="alert alert-success">
        <strong>Session ID:</strong> @sessionId
    </div>

    <!-- Call Agent Form -->
    <form asp-action="CallAgent" method="post">
        <input type="hidden" name="sessionId" value="@sessionId" />
        <button type="submit" class="btn btn-success">Call Agent</button>
    </form>
}

<hr />

@if (Model.Any())
{
    <h3>Agent Responses</h3>
    @foreach (var message in Model)
    {
        <div style="white-space: pre-wrap; margin-bottom: 20px; padding: 15px; background-color: #f2f2f2; border: 1px solid #ccc;">
            @message
        </div>
    }
}